{"mappings":"YAIA,IAAMA,EAAO,CACXC,KAAOC,SAASC,cAAc,SAC9BC,SAAWF,SAASC,cAAc,kBAGhCE,EAAO,EAaX,SAASC,I,IAAcC,EAAAC,UAAAC,OAAA,YAAAD,UAAA,GAAQA,UAAA,GAAD,EACtBE,EAAU,mCACVC,EAAW,+BACXC,EAAY,sBAEZC,EAAS,IAAIC,gBAAiB,CAClCC,QAAUL,EACVM,KAAAT,IAGF,OAAOU,MAAM,GAAeC,OAAZP,EAAS,KAAgBO,OAAbN,EAAU,KAAUM,OAAPL,IAAUM,MAAK,SAAAC,GACtD,IAAKA,EAAIC,GACP,MAAM,IAAIC,MAAM,SAAwBJ,OAAfE,EAAIG,OAAO,MAAmBL,OAAfE,EAAII,aAE7C,OAAOJ,EAAIK,M,IAqBhB,SAASC,EAAaC,GACpB,OAAOA,EAAIC,KAAI,SAAAC,G,IAAEC,EAAWD,EAAXC,YAAaC,EAAcF,EAAdE,eAAeC,EAAYH,EAAZG,aAAcC,EAAYJ,EAAZI,a,MAC3D,qEACkEf,OAArBY,EAAY,WAE7CZ,OAFsDa,EAAe,iCAGtEb,OADCa,EAAe,sBAEhBb,OADAc,EAAa,qBACAd,OAAbe,EAAa,8B,IAGvBC,KAAK,G,CAxDRlC,EAAKI,SAAS+B,iBAAiB,SA6B/B,SAAoBN,G,IAAAO,EAAAP,EAACO,OACnB/B,GAAQ,EACR+B,EAAOC,UAAW,EAElB/B,EAAaD,GACVc,MAAK,SAAAmB,GAEJtC,EAAKC,KAAKsC,mBAAmB,YAAab,EAAaY,EAAKE,UAEzDF,EAAKtB,MAAQsB,EAAKG,aACnBzC,EAAKI,SAASsC,UAAUC,QAAQ,YAAc,S,IAGjDC,OAAM,SAAAC,G,OAAOC,QAAQC,IAAIF,E,IACzBG,SAAQ,W,OAAMZ,EAAOC,UAAW,C,OAzCrC/B,IACCa,MAAK,SAAAmB,GACJQ,QAAQC,IAAIT,GACZtC,EAAKC,KAAKsC,mBAAmB,YAAab,EAAaY,EAAKE,UACzDF,EAAKtB,KAAOsB,EAAKG,aACtBzC,EAAKI,SAASsC,UAAUC,QAAQ,SAAU,Y,IAEvCC,OAAM,SAAAC,G,OAAOC,QAAQC,IAAIF,E","sources":["src/index.js"],"sourcesContent":["// 92a9a9e3708a3e9451b7037d5906879a\n// https://api.themoviedb.org/3\n// /trending/movie/\n\nconst refs = {\n  list : document.querySelector('.list'),\n  LoadMore : document.querySelector('.js-load-more')\n}\n\nlet page = 1;\n\nrefs.LoadMore.addEventListener('click', onLoadMore)\n\nserviceMovie()\n.then(data => {\n  console.log(data);\n  refs.list.insertAdjacentHTML('beforeend', createMarkup(data.results))\n  if(data.page < data.total_pages){\nrefs.LoadMore.classList.replace('hidden', 'load-more')\n  }\n}).catch(err => console.log(err))\n\nfunction serviceMovie (page = 1){\n  const API_KEY = '92a9a9e3708a3e9451b7037d5906879a'\n  const BASE_URL = 'https://api.themoviedb.org/3'\n  const END_POINT = 'trending/movie/week'\n\n  const params = new URLSearchParams ({\n    api_key : API_KEY,\n    page,\n  })\n\n  return fetch(`${BASE_URL}/${END_POINT}?${params}`).then(res => {\n    if (!res.ok) {\n      throw new Error(`Error ${res.status}: ${res.statusText}`)\n    }\n     return res.json();\n  })\n}\n\nfunction onLoadMore({target}) {\n  page += 1.\n  target.disabled = true;\n\n  serviceMovie(page)\n    .then(data => {\n\n      refs.list.insertAdjacentHTML('beforeend', createMarkup(data.results))\n      \n      if(data.page >= data.total_pages){\n        refs.LoadMore.classList.replace('load-more' , 'hidden')\n      }\n    })\n    .catch(err => console.log(err))\n    .finally(()=> (target.disabled = false))\n}\n\nfunction createMarkup(arr){\n  return arr.map(({poster_path, original_title,release_date, vote_average })=>\n  `<li class='items'>\n    <img src=\"https://image.tmdb.org/t/p/w500${poster_path}\" alt=\"${original_title}\">\n      <div>\n        <h2>${original_title}</h2>\n        <p>${release_date}</p>\n        <p>${vote_average}</p>\n      </div>\n  </li>`)\n  .join('')\n}"],"names":["$b8f9b7833fa37166$var$refs","list","document","querySelector","LoadMore","$b8f9b7833fa37166$var$page","$b8f9b7833fa37166$var$serviceMovie","page1","arguments","length","API_KEY","BASE_URL","END_POINT","params","URLSearchParams","api_key","page","fetch","concat","then","res","ok","Error","status","statusText","json","$b8f9b7833fa37166$var$createMarkup","arr","map","param","poster_path","original_title","release_date","vote_average","join","addEventListener","target","disabled","data","insertAdjacentHTML","results","total_pages","classList","replace","catch","err","console","log","finally"],"version":3,"file":"index.583e3496.js.map"}